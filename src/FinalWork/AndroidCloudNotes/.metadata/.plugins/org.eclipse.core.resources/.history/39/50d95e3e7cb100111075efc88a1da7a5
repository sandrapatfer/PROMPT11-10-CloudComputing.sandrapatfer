package prompt.cloudnotes.activities;

import prompt.cloudnotes.CloudNotesApp;
import prompt.cloudnotes.R;
import prompt.cloudnotes.providers.NoteProviderContract;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ListView;

public class NotesActivity extends Activity {

	private Cursor _cursor;
	private final int COL_INDEX_ID = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        
        Log.d(CloudNotesApp.TAG, "NotesActivity.onCreate");

        setContentView(R.layout.notes_list_view);
        
        Button btn = (Button)findViewById(R.id.btn_note_create);
        btn.setOnClickListener(new View.OnClickListener() {
			public void onClick(View v) {
				Log.i(CloudNotesApp.TAG, "btn_note_create onClick");
				Intent intent = new Intent();
				intent.setClass(NotesActivity.this, NoteActivity.class);				
				startActivity(intent);
			}
		});
        
        ListView listView = (ListView)findViewById(R.id.notes_listview);
        
        _cursor = getContentResolver().query(Uri.parse(NoteProviderContract.URI), 
        		new String[] { NoteProviderContract.COL_ID, NoteProviderContract.COL_NAME}, 
        		"list = 1", null, null);
        startManagingCursor(_cursor);
        
        final NoteAdapter adapter = new NoteAdapter(this, _cursor);
        listView.setAdapter(adapter);

    }

}
