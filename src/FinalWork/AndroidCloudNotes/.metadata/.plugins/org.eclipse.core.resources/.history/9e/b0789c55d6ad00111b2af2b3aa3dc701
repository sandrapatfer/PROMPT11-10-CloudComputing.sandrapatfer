package prompt.cloudnotes.activities;

import prompt.cloudnotes.CloudNotesApp;
import prompt.cloudnotes.R;
import prompt.cloudnotes.providers.TaskListProviderContract;
import android.app.Activity;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class TaskListActivity extends Activity {

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		
		Log.d(CloudNotesApp.TAG, "TaskListActivity.onCreate");
				
        setContentView(R.layout.tasklist_view);
        TextView nameTextView = (TextView)findViewById(R.id.text_taskListName);
        TextView descrTextView = (TextView)findViewById(R.id.text_taskListDescription);
		
		Uri itemUri = getIntent().getData();
		if (itemUri != null) {
			Cursor cursor = getContentResolver().query(itemUri,
				new String[] {TaskListProviderContract.COL_ID, TaskListProviderContract.COL_NAME, TaskListProviderContract.COL_DESCR},
				null, null, null);
			if (cursor.moveToFirst()) {
				String userText = cursor.getString(cursor.getColumnIndex(TaskListProviderContract.COL_NAME)); 
				nameTextView.setText(userText);
				descrTextView.setText(cursor.getString(cursor.getColumnIndex(TaskListProviderContract.COL_DESCR)));
			}
			else {
				Log.e(CloudNotesApp.TAG, "query returned no rows!");
			}
		}
		else {
			Log.d(CloudNotesApp.TAG, "creating a new list");
		}
			
	}

}
